---
description: gh CLIを使ってPRを取得し、内容を要約・レビューするワークフロー
---

1. gh CLI がインストールされていることを確認する。インストールされていない場合は、公式ドキュメント（https://cli.github.com/manual/installation）を参考にインストールする。

2. GitHub CLI で認証を行う（初回のみ）。

   ```
   gh auth login
   ```

3. 対象リポジトリのディレクトリに移動する。

4. 取得したい PR 番号または最新の PR を確認する。

   ```
   gh pr list
   ```

5. PR の詳細情報を取得する。

   ```
   gh pr view <PR番号> --json title,body,files,commits --jq .
   ```

6. PR の diff や変更ファイルの内容を取得し、内容を要約する。

   ```
   gh pr diff <PR番号>
   ```

7. PR の内容と diff をもとに、どのような変更が行われたかをまとめる。ポイント：

   - 変更されたファイル一覧
   - 主な変更点（機能追加、バグ修正、リファクター等）
   - 追加・修正・削除されたコードや設定

8. 変更内容の中で「詳しくレビューした方が良い箇所」を抽出し、理由とともに提案する。例：

   - 仕様をすべて満たしているか確認
   - 影響範囲が広い/重要なロジックの変更
   - 依存パッケージや設定ファイルの追加・変更
   - UI やアクセシビリティに関わる部分
   - セキュリティやパフォーマンスに影響する箇所
   - コード品質や設計の観点からの指摘
   - 動作確認やテスト観点でのアドバイス
   - 改善点や気になる点

9. 上記のまとめと提案をユーザーに伝える。

10. ユーザーの指示があった時のみ、gh CLI でレビューコメントを投稿する。

```
gh pr review <PR番号> --comment -b "ここにレビューコメントを記載"
```

11. レビューが完了したら、ユーザーの指示があった時のみ approve や request changes も可能。
    `gh pr review <PR番号> --approve
gh pr review <PR番号> --request-changes -b "修正点を記載"
   `