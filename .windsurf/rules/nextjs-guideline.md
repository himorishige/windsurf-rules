---
trigger: model_decision
description: Next.js In-Development Reference
---

## Next.js Guideline

### データフェッチ

- **`fetch` の利用 (axios の非推奨化)**:

  - Next.js 15 では、データフェッチにネイティブの `fetch` API を使用することが強く推奨されます。`fetch` は、Next.js のキャッシュメカニズムと深く統合されており、より効率的なデータ取得とキャッシュ戦略を実現します。
  - `axios` などのサードパーティライブラリは、特別な理由がない限り使用を避け、`fetch` の組み込み機能を活用してください。

- **非同期リクエスト API (`cookies`, `headers`, `params`, `searchParams` の非同期化)**:
  - Next.js 15 では、`cookies`, `headers`, `draftMode`, `params` (layout.js, page.js, route.js, default.js, generateMetadata, generateViewport 内で使用される場合), `searchParams` (page.js 内で使用される場合)といったリクエスト関連の API が非同期に変更されました。
  - これにより、これらの API が利用可能になるのを待たずに、他の部分のレンダリングを先行させることが可能になり、ページの表示速度が向上します。コードを記述する際は、これらの API が非同期であることを考慮し、`await` を適切に使用してください。

### キャッシュ戦略

- **デフォルトキャッシュの変更点と対応**:

  - Next.js 15 では、Get リクエストの Route Handler と Client Router Cache のデフォルトでのキャッシュが無効になりました。これにより、常に最新のデータが取得されるようになります。
  - 以前のようにキャッシュを有効にしたい場合は、`next.config.js` で明示的に設定を行う必要があります。ただし、`sitemap.ts`, `opengraph-image.tsx`, `icon.tsx` などのメタデータファイルは引き続きデフォルトでキャッシュされます。

- **`use cache` の活用 (実験的機能)**:
  - Next.js 15 で導入された実験的な `use cache` は、よりシンプルで明示的なキャッシュ戦略を提供します。これにより、静的なページと動的なページを明確に区別し、それぞれに最適なキャッシュ動作を適用できます。
  - `Suspense` と組み合わせることで、動的なデータフェッチを効率的に処理し、静的なコンテンツはキャッシュを活用して高速に提供することが可能になります。

### 推奨事項

- **積極的な新機能の採用**: React 19 および Next.js 15 で導入された新しい API や概念を積極的に学習し、既存のコードベースに適用することを検討してください。
- **非同期処理の理解**: `Actions` や非同期リクエスト API など、非同期処理の新しいパラダイムを深く理解し、適切に実装することで、アプリケーションの応答性を最大化できます。
- **データフェッチの最適化**: `fetch` と `use API` を中心としたデータフェッチ戦略を採用し、不要なライブラリの使用を避け、Next.js の組み込みキャッシュ機能を活用してください。
- **継続的な学習**: Web 開発の分野は進化が速いため、React および Next.js の公式ドキュメントやコミュニティの情報を定期的にチェックし、常に最新のベストプラクティスを取り入れるように努めてください。